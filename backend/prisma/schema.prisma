// Prisma schema for MySQL

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// ===== Enum untuk role =====
enum Role {
  admin
  user
}

// ===== Model User =====
model User {
  id           Int       @id @default(autoincrement())
  email        String    @unique
  name         String?
  passwordHash String

  role         Role      @default(admin)
  resetToken   String?   @db.VarChar(96)
  resetExpires DateTime?

  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @default(now()) @updatedAt
}

model KegiatanKeliling {
  id        Int      @id @default(autoincrement())
  tanggal   DateTime
  lokasi    String
  peserta   Int
  kabupaten String   @default("")
  kecamatan String   @default("")
  desa      String   @default("")
}

 model Viola {
   id                     Int     @id @default(autoincrement())
   kabupaten              String? @default("")
   kecamatan              String? @default("")
   bulan                  String
   administrasi           Int     @default(0)
   permintaanInformasi    Int     @default(0)
   penangananPengaduan    Int     @default(0)
   jumlahPeserta          Int
   createdAt              DateTime @default(now())
 }


model IndeksPrima {
  id     Int      @id @default(autoincrement())

  // periode
  tahun  Int
  bulan  Int      // 1..12

  // waves
  wave1  Float      @default(0)
  wave2  Float      @default(0)
  wave3  Float      @default(0)
  wave4  Float      @default(0)

  // total (disimpan untuk export)
  nilai  Float      @default(0)

  createdAt DateTime @default(now())
}

model IndeksPengaduan {
  id     Int    @id @default(autoincrement())
  bulan  String
  jumlah Int

  // SLA breakdown
  sla1   Int    @default(0) // 1 hari
  sla2   Int    @default(0) // 2 hari
  sla3   Int    @default(0) // 3 hari
  slagt3 Int    @default(0) // > 3 hari
}

model PrimaTarget {
  id       Int      @id @default(autoincrement())
  tahun    Int      @unique
  target   Float    @default(0)
  createdAt DateTime @default(now())
}